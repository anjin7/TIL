# OSI 7 Layer

네트워크에서 통신이 일어나는 과정을 7 단계로 나눈것
국제표준화기구(ISO)에서 네트워크 간의 호환을 위해 만듦

통신이 일어나는 과정을 단계별로 파악하고
통신 과정 중에 특정한 곳에 이상이 생길 경우

다른 단계의 장비 및 소프트웨어를 건드리지 않고 해결 할 수 있기 때문

![OSI7계층](./img.jpg)

## 1. Physical Layer

```
- 실제 장치를 연결하기 위한 전기적 기계적 기능적 사항과 연관된 계층
- 단지 데이터를 전달만 할뿐 데이터가 무엇인지, 에러가 있는지 등은 고려하지 않음
- 사용되는 단위는 bit

-> 케이블, 리피터, 허브를 통해 데이터를 전송
```

## 2. DataLink Layer

```
- 물리계층을 통해 송수신되는 정보의 오류와 흐름을 관리 => 안전한 정보의 전달
- 오류를 찾고 재전송
- Mac Adress를 사용하여 통신
- 전송되는 단위는 frame

-> 브릿지, 스위치 등을 통해 맥주소를 이용하여 물리계층에서 받은 정보를 전달

* Point-To-Point 간의 신뢰성있는 전송을 보장하기 위한 계층
주소값은 물리적으로 할당 받고, 이는 네트워크 카드가 만들어질 때부터 할당되어있음
주소 체계는 단일 구조

이더넷, HDLC, ADCCP, 패킷 스위칭 네트워크, LLC
```

## 3. Network Layer

```
- 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능 (라우팅)
- 경로를 선택하고 주소를 정하고 경로에 따른 패킷을 전달
- 라우팅, 흐름제어, Segmaentation, 오류제어, Internetorking 등을 수행
- 데이터를 연결하는 다른 네트워크를 통해서 전달함으로써 인터넷이 가능하게 만드는 계층
- 논리적인 주소 구조(IP), 즉 네트워크 관리자가 직접 주소를 할당하는 구조를 가지며, 계층적
```

### 3.1 IP 계층

```
TCP/IP 상에서 IP 계층이란 네트워크의 주소(IP 주소)를 정의하고, IP 패킷의 전달 및 라우팅을 담당하는 계층

OSI 7계층모델의 관점에서 보면 IP 계층은 네트워크계층에 해당

- 즉, 패킷을 목적지까지 전달하는 역할 및 그에 수반되는 기타 역할을 함

* IP 계층의 주요 역할

- IP 계층에서는 그 하위계층인 데이터링크 계층의 하드웨어적인 특성에(ATM이든 Frame Relay이든 상관없이)관계없이 독립적인 역할을 수행

* IP 계층 상에 있는 주요 프로토콜

- 패킷의 전달을 책임지는 IP
- 패킷 전달 에러의 보고 및 진단을 위한 ICMP
- 복잡한 네트워크에서 인터네트워킹을 위한 경로를 찾게해주는 라우팅 프로토콜
```

### 3.2 IP 프로토콜

```
TCP/IP 기반의 인터넷 망을 통하여 데이타그램의 전달을 담당하는 프로토콜

3.2.1. 주요 기능

IP 계층에서 IP 패킷의 라우팅 대상(Routing)
IP 주소 지정(Addressing)

3.2.2. 주요 특징

- '신뢰성(에러제어)' 및 '흐름제어' 기능이 전혀 없음   -> Best-Effort Service
* 신뢰성을 확보하려면 IP 계층 위의 TCP와 같은 상위 트랜스포트 계층에 의존
- 비연결성 데이터그램 방식으로 전달되는 프로토콜       -> Connectionless
- 패킷의 완전한 전달(소실,중복,지연,순서바뀜 등이 없게함)을 보장 않음     -> Unreliable
- IP 패킷 헤더 내 수신 및 발신 주소를 포함            -> IPv4 헤더, IPv6 헤더, IP 주소
- IP 헤더 내 바이트 전달 순서 : 최상위 바이트(MSB)를 먼저 보냄           -> Big-endian
- 경우에따라, 단편화가 필요함     -> IP 단편화
- TCP, UDP, ICMP, IGMP 등이 IP 데이타그램에 실려서 전송
```

## 4. Transport Layer

```
- 통신을 활성화 하기 위한 계층
- 주로 TCP프로토콜을 이용, 포트를 열어 응용프로그램이 전송할 수 있게 함
- 종단 간 신뢰성 있고 정확한 데이터 전송을 담당
- 송신자와 수신자 간의 신뢰성있고 효율적인 데이터를 전송하기 위하여 오류검출 및 복구, 흐름제어와 중복검사 등을 수행
- 데이터 단위는 세그먼트(Segment)

-> 패킷 생성(Assembly/Sequencing/Deassembly/Error detection/Request repeat/Flow control) 및 전송
```

### 4.1 TCP프로토콜

```
OSI 계층모델의 관점에서 전송 계층(4계층)에 해당

양종단 호스트 내 프로세스 상호 간에 신뢰적인 연결지향성 서비스를 제공

- IP의 비신뢰적인 최선형 서비스에다가 신뢰적인 연결지향성 서비스를 제공하게 됨
. 신뢰적인 전송을 보장함으로써, 어플리케이션 구현이 한층 쉬워지게 됨

4.1.1. 신뢰성 있음 (Reliable)

- 패킷 손실, 중복, 순서바뀜 등이 없도록 보장
- TCP 하위계층인 IP 계층의 신뢰성 없는 서비스에 대해 다방면으로 신뢰성을 제공

4.1.2. 연결지향적(Connection-oriented)                          ☞ TCP 연결

같은 전송계층의 UDP가 비연결성(connectionless)인 것과는 달리, TCP는 연결지향적
이 경우, 느슨한 연결(Loosly Connected)을 갖으므로 강한 연결을 의미하는
가상회선이라는 표현 보다는 오히려 연결지향적이라고 말함
- 연결 관리를 위한 연결설정 및 연결해제 필요     ☞ TCP 연결설정, TCP 연결종료
양단간 어플리케이션/프로세스는 TCP가 제공하는 연결성 회선을 통하여 서로 통신
```

### 4.2 UDP프로토콜

```
전송 계층의 통신 프로토콜의 하나 (TCP에 대비됨)

- 신뢰성이 낮은 프로토콜로써 완전성을 보증하지 않으나,
- 가상회선을 굳이 확립할 필요가 없고 유연하며 효율적 응용의 데이타 전송에 사용

4.2.1. 비연결성이고, 신뢰성이 없으며, 순서화되지 않은 Datagram 서비스 제공

- 메세지가 제대로 도착했는지 확인하지 않음 (확인응답 없음)
- 수신된 메세지의 순서를 맞추지 않음 (순서제어 없음)
- 흐름 제어를 위한 피드백을 제공하지 않음 (흐름제어 없음)
- 검사합을 제외한 특별한 오류 검출 및 제어 없음 (오류제어 거의 없음)
UDP를 사용하는 프로그램 쪽에서 오류제어 기능을 스스로 갖추어야 함
- 데이터그램 지향의 전송계층용 프로토콜 (논리적인 가상회선 연결이 필요없음)
비연결접속상태 하에서 통신

4.2.2. 실시간 응용 및 멀티캐스팅 가능

- 빠른 요청과 응답이 필요한 실시간 응용에 적합
- 여러 다수 지점에 전송 가능 (1:多)

4.2.3. 헤더가 단순함

- UDP는 TCP 처럼 16 비트의 포트 번호를 사용하나,
- 헤더는 고정크기의 8 바이트(TCP는 20 바이트) 만 사용

즉, 헤더 처리에 많은 시간과 노력을 요하지 않음
```

## 5. Session Layer

```
데이터가 통신하기 위한 논리적인 연결, 통신을 하기위한 대문

세션 계층은 4 계층과 무관하게 응용 프로그램 관점에서 봐야함

- 세션 설정, 유지, 종료, 전송 중단시 복구
- 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공
- 동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(Full Duplex)의 통신과 함께,
  체크 포인팅과 유휴, 종료, 다시 시작 과정 등을 수행
- TCP/IP 세션을 만들고 없애는 책임

-> 통신하는 사용자들을 동기화하고 오류복구 명령들을 일괄적으로 다룸
   통신을 하기 위한 세션을 확립/유지/중단 (운영체제)
```

## 6. Presentation Layer

```
데이터를 어떻게 표현할지 정하는 역할을 하는 계층

- 송신자에서 온 데이터를 해석하기 위한 응용계층 데이터 부호화, 변화
- 수신자에서 데이터의 압축을 풀수 있는 방식으로 된 데이터 압축
- 데이터의 암호화와 복호화

코드 간의 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용 계층(Application Layer)으로부터 덜어 줌
* MIME 인코딩이나 암호화 등
  EBCDIC로 인코딩된 문서 파일을 ASCII로 인코딩된 파일로 변환
  해당 데이터가 TEXT인지, 그림인지, GIF인지 JPG인지의 구분 등

-> 사용자의 명령어를 완성및 결과 표현. 포장/압축/암호화
```

## 7. Application Layer

```
사용자와 가장 밀접한 계층으로 인터페이스 역할
최종 목적지로서 HTTP, FTP, SMTP, POP3, IMAP, Telnet 등과 같은 프로토콜

- 응용 프로세스 간의 정보 교환을 담당
* 전자메일, 인터넷 브라우저, 동영상 플레이어 등

-> 네트워크 소프트웨어 UI 부분, 사용자의 입출력(I/O)부분
```

### 7.1 HTTP 프로토콜(HyperText Transfer Protocol)

```
웹 상에서 웹 서버 및 웹브라우저 상호 간의 데이터 전송을 위한 응용계층 프로토콜
처음에는, WWW 상의 하이퍼텍스트 형태의 문서를 전달하는데 주로 이용
현재에는, 이미지,비디오,음성 등 거의 모든 형식의 데이터 전송 가능

7.1.1. 요청 및 응답의 구조

동작형태가 클라이언트/서버 모델로 동작

7.1.2. 메세지 교환 형태의 프로토콜

- 클라이언트와 서버 간에 `HTTP 메세지`를 주고받으며 통신
SMTP 전자메일 프로토콜과 유사
- HTTP의 응답 및 요청 메세지 구성
- HTTP 메세지 내 헤더 항목들

7.1.3. 트랜잭션 중심의 비연결성 프로토콜

- 종단간 연결이 없음 (Connectionless)
- 이전의 상태를 유지하지 않음 (Stateless)

7.1.4. 전송계층 프로토콜 및 사용 포트 번호

- 전송계층 프로토콜 : TCP
- 사용 포트 번호    : 80번

7.1.5. http 표준

HTTP 1.0 : RFC 1945  (~1997년)
- 유용한 초기 개념들 도입
- HTTP 헤더, HTTP 메서드, HTTP 응답 코드, 리다이렉트, 비지속 연결 등

HTTP 1.1 : RFC 2068 => RFC 2616 => RFC 7230~7235  (1998년~)
- HTTP 1.0 으로부터 기능 향상
- HTTP 헤더 내 Host 필드를 필수 항목으로 함 (1개 IP 주소에 다수의 가상 호스팅 가능)
- HTTP 헤더 내 Accept 필드에 의한 컨텐츠 협상
- 잘 정의된 캐시 컨트롤
- 블록 단위 인코딩 전송
- 지속 연결 회선(킵얼라이브 커넥션)을 통한 재사용 가능
- 요청 파이프라인을 이용한 병렬 커넥션 처리(실제 사용 거의 없음) 등
```
